import{s as oe,n as se,r as le,o as ce}from"../chunks/scheduler.BvLojk_z.js";import{S as re,i as ue,e as r,s as _,m as K,n as ie,c as u,g,h as f,d as N,o as Q,p as L,q as h,v as de,k as t,j as X,r as Y,w as ee,t as te,a as ne,u as ae}from"../chunks/index.B5mXUy-A.js";import{g as me}from"../chunks/globals.D0QH3NT1.js";import{A as _e,T as ge}from"../chunks/TOP_HEAD.Cz-sVnpi.js";import{A as k}from"../chunks/stores.LUaBdK6V.js";const fe=!0,Ae=Object.freeze(Object.defineProperty({__proto__:null,prerender:fe},Symbol.toStringTag,{value:"Module"})),{document:q}=me;function pe(x){let d,p,e,o,i,a,E,s,n,b,S="New Sub Account",H,y,z="SubAccount Parent",O,A,m,G="Loading Ledgers...",D,T,R='SubAccount Name : <input type="text" placeholder="Enter SubAccount Name" id="sub_account_name"/>',P,$,U,v,F="Save SubAccount",V,I,J="Loading Saved SubAccounts...",w,j,W;return o=new _e({}),a=new ge({}),{c(){d=r("meta"),p=_(),e=r("section"),K(o.$$.fragment),i=_(),K(a.$$.fragment),E=_(),s=r("div"),n=r("fieldset"),b=r("legend"),b.textContent=S,H=_(),y=r("label"),y.textContent=z,O=_(),A=r("select"),m=r("option"),m.textContent=G,D=_(),T=r("label"),T.innerHTML=R,P=_(),$=r("div"),U=_(),v=r("button"),v.textContent=F,V=_(),I=r("div"),I.textContent=J,this.h()},l(l){const B=ie("svelte-1rfi9z1",q.head);d=u(B,"META",{name:!0,content:!0}),B.forEach(g),p=f(l),e=u(l,"SECTION",{});var C=N(e);Q(o.$$.fragment,C),i=f(C),Q(a.$$.fragment,C),E=f(C),s=u(C,"DIV",{class:!0});var M=N(s);n=u(M,"FIELDSET",{});var c=N(n);b=u(c,"LEGEND",{"data-svelte-h":!0}),L(b)!=="svelte-u24y8z"&&(b.textContent=S),H=f(c),y=u(c,"LABEL",{for:!0,"data-svelte-h":!0}),L(y)!=="svelte-1o1h59r"&&(y.textContent=z),O=f(c),A=u(c,"SELECT",{id:!0});var Z=N(A);m=u(Z,"OPTION",{"data-svelte-h":!0}),L(m)!=="svelte-gv08z2"&&(m.textContent=G),Z.forEach(g),D=f(c),T=u(c,"LABEL",{"data-svelte-h":!0}),L(T)!=="svelte-yas9xh"&&(T.innerHTML=R),P=f(c),$=u(c,"DIV",{id:!0}),N($).forEach(g),U=f(c),v=u(c,"BUTTON",{class:!0,"data-svelte-h":!0}),L(v)!=="svelte-19uc7ko"&&(v.textContent=F),c.forEach(g),V=f(M),I=u(M,"DIV",{class:!0,"data-svelte-h":!0}),L(I)!=="svelte-5nof6f"&&(I.textContent=J),M.forEach(g),C.forEach(g),this.h()},h(){q.title="New Sub Account",h(d,"name","description"),h(d,"content","Create New Sub Account"),h(y,"for","account_parent"),m.__value="",de(m,m.__value),h(A,"id","account_parent"),h($,"id","message"),h(v,"class","saveBTN"),h(I,"class","saved_sub_account_list report_container"),h(s,"class","content")},m(l,B){t(q.head,d),X(l,p,B),X(l,e,B),Y(o,e,null),t(e,i),Y(a,e,null),t(e,E),t(e,s),t(s,n),t(n,b),t(n,H),t(n,y),t(n,O),t(n,A),t(A,m),t(n,D),t(n,T),t(n,P),t(n,$),t(n,U),t(n,v),t(s,V),t(s,I),w=!0,j||(W=[ee(A,"change",x[1]),ee(v,"click",x[0])],j=!0)},p:se,i(l){w||(te(o.$$.fragment,l),te(a.$$.fragment,l),w=!0)},o(l){ne(o.$$.fragment,l),ne(a.$$.fragment,l),w=!1},d(l){l&&(g(p),g(e)),g(d),ae(o),ae(a),j=!1,le(W)}}}function ve(x){async function d(){var a,E;let e=document.getElementsByClassName("saveBTN")[0];const o=document.getElementById("account_parent").value,i=document.getElementById("sub_account_name").value;if(o.length==0){(a=document.getElementById("account_parent"))==null||a.focus();return}if(i.length==0){(E=document.getElementById("sub_account_name"))==null||E.focus();return}document.getElementById("message").innerHTML="Please Wait...",e.disabled=!0;try{const s=localStorage.getItem("app_auth");let n=k+`q=SAVE_SUBLEDGER&app_token=${s}&sub_ledger_name=${i}&ledger_parent_code=${o}`,S=await(await fetch(n)).json();if(S.code==1){document.getElementById("message").innerHTML=S.message,document.getElementById("account_parent").value="",document.getElementById("sub_account_name").value="",e.disabled=!1,p();return}document.getElementById("message").innerHTML=JSON.stringify(S),document.getElementById("message").innerHTML+="<br/>"+S.message,e.disabled=!1}catch(s){console.log(s),e.disabled=!1}}ce(async()=>{try{const e=localStorage.getItem("app_auth");let o=k+`q=GET_SAVED_ACCOUNT&app_token=${e}`,a=await(await fetch(o)).json();a.message=="INVALID AUTHORIZARTION"&&(document.getElementById("message").innerHTML=a.message,window.location="/login"),document.getElementById("account_parent").innerHTML=a.option}catch(e){console.log(e)}p()});async function p(){let e="";const o=document.getElementById("account_parent").value;o.length==0?e="ALL":e=o,document.getElementsByClassName("saved_sub_account_list")[0].innerHTML=`Loading Sub Account For <b>${e} Ledger</b>`;try{const i=localStorage.getItem("app_auth");let a=k+`q=GET_SAVED_SUB_ACCOUNT&app_token=${i}&main=${e}`,s=await(await fetch(a)).json();document.getElementsByClassName("saved_sub_account_list")[0].innerHTML=s.html}catch(i){console.log(i)}}return[d,p]}class Ie extends re{constructor(d){super(),ue(this,d,ve,pe,oe,{})}}export{Ie as component,Ae as universal};
